---
# ref. http://wiki.brightbox.co.uk/docs:ruby-ng
- name: ensure old Ruby 1.9.3 package removed
  apt: pkg=ruby1.9.1 state=absent
  sudo: yes

- name: ensure Ruby NG repo available
  apt_repository: repo='ppa:brightbox/ruby-ng-experimental' state=absent
  sudo: yes

- name: ensure Ruby NG repo available
  apt_repository: repo='ppa:brightbox/ruby-ng'
  sudo: yes

- name: ensure Ruby 1.9.3 package available
  apt: pkg={{ item }} update_cache=yes state=latest install_recommends=no
  with_items:
    - ruby1.9.3
    - rubygems
    - ruby-switch
  sudo: yes

- name: ensure Bundler available
  gem: name=bundler user_install=no state=latest
  sudo: yes
